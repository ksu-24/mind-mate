# üê≥ Docker Setup –¥–ª—è Mind Mate

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ—î–∫—Ç Mind Mate –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ.

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

- Docker (–≤–µ—Ä—Å—ñ—è 20.10 –∞–±–æ –Ω–æ–≤—ñ—à–∞)
- Docker Compose (–≤–µ—Ä—Å—ñ—è 2.0 –∞–±–æ –Ω–æ–≤—ñ—à–∞)

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°–∫–æ–ø—ñ—é–π—Ç–µ —Ñ–∞–π–ª –∑ –ø—Ä–∏–∫–ª–∞–¥–æ–º –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

```bash
cp .env.docker.example .env.docker
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env.docker` —Ç–∞ –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è:
- `NEXTAUTH_SECRET` - –∑–≥–µ–Ω–µ—Ä—É–π—Ç–µ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫
- `GOOGLE_CLIENT_ID` —Ç–∞ `GOOGLE_CLIENT_SECRET` - –∑ Google Cloud Console
- `GOOGLE_AI_API_KEY` - –∫–ª—é—á API –¥–ª—è Gemini
- `NEXT_PUBLIC_SUPABASE_URL` —Ç–∞ –∫–ª—é—á—ñ Supabase
- –Ü–Ω—à—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ

### 2. –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

#### –í–∞—Ä—ñ–∞–Ω—Ç 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

```bash
# –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É
docker-compose build

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose up -d

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker-compose logs -f

# –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose down
```

#### –í–∞—Ä—ñ–∞–Ω—Ç 2: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Docker –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ

```bash
# –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É
docker build -t mind-mate .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -d \
  --name mind-mate \
  -p 3000:3000 \
  --env-file .env.docker \
  mind-mate

# –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
docker logs -f mind-mate

# –ó—É–ø–∏–Ω–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker stop mind-mate
docker rm mind-mate
```

### 3. –î–æ—Å—Ç—É–ø –¥–æ –¥–æ–¥–∞—Ç–∫—É

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É –¥–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
- http://localhost:3000

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –ø–æ—Ä—Ç—É

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω–∏—Ç–∏ –ø–æ—Ä—Ç, –≤—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `docker-compose.yml`:

```yaml
ports:
  - "8080:3000"  # –ó–æ–≤–Ω—ñ—à–Ω—ñ–π:–í–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π
```

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–¥—É

–ü—ñ—Å–ª—è –∑–º—ñ–Ω —É –∫–æ–¥—ñ:

```bash
# –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –æ–±—Ä–∞–∑—É
docker-compose build

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose up -d
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤

```bash
# –í—Å—ñ –ª–æ–≥–∏
docker-compose logs

# –û—Å—Ç–∞–Ω–Ω—ñ 100 —Ä—è–¥–∫—ñ–≤
docker-compose logs --tail=100

# –õ–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
docker-compose logs -f
```

## üõ† –†–æ–∑—Ä–æ–±–∫–∞ –∑ Docker

–î–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Docker –∑ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—è–º —Ç–æ–º—ñ–≤:

```yaml
# docker-compose.dev.yml
version: '3.8'

services:
  mind-mate-dev:
    build:
      context: .
      dockerfile: Dockerfile.dev
    volumes:
      - .:/app
      - /app/node_modules
      - /app/.next
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=development
    env_file:
      - .env.local
```

## üìù –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker —Ñ–∞–π–ª—ñ–≤

- `Dockerfile` - –±–∞–≥–∞—Ç–æ–µ—Ç–∞–ø–Ω–∞ –∑–±—ñ—Ä–∫–∞ –¥–ª—è production
- `docker-compose.yml` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–ª—è –∑–∞–ø—É—Å–∫—É
- `.dockerignore` - —Ñ–∞–π–ª–∏, —è–∫—ñ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≤ –æ–±—Ä–∞–∑
- `.env.docker.example` - –ø—Ä–∏–∫–ª–∞–¥ –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

Docker Compose –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –∑–¥–æ—Ä–æ–≤'—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞. –ú–æ–∂–Ω–∞ —Ç–∞–∫–æ–∂ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤—Ä—É—á–Ω—É:

```bash
# –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose ps

# –î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
docker inspect mind-mate
```

## üêõ –í–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏: `docker-compose logs`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ `.env.docker`
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –ø–æ—Ä—Ç 3000 –Ω–µ –∑–∞–π–Ω—è—Ç–∏–π: `lsof -i :3000`

### –ü–æ–º–∏–ª–∫–∏ –ø—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏

1. –û—á–∏—Å—Ç—ñ—Ç—å –∫–µ—à Docker: `docker builder prune`
2. –ü–µ—Ä–µ–±—É–¥–æ–≤–∞ –±–µ–∑ –∫–µ—à—É: `docker-compose build --no-cache`

### –ü—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø—É

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏ –∑ –ø—Ä–∞–≤–∞–º–∏, –ø–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ —Ñ–∞–π–ª–∏ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –ø—Ä–∞–≤–∞:

```bash
chmod -R 755 .
```

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [Docker Documentation](https://docs.docker.com/)
- [Next.js Docker Deployment](https://nextjs.org/docs/deployment#docker-image)
- [Docker Compose Documentation](https://docs.docker.com/compose/)

